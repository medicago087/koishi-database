import { Context, Dict, EnvData } from '@koishijs/core';
export * from './utils';
declare module '@koishijs/core' {
    interface Context {
        loader: Loader;
    }
    interface Events {
        'config'(): void;
    }
    namespace Context {
        interface Config {
            name?: string;
            plugins?: Dict;
        }
    }
}
declare module 'cordis' {
    interface EffectScope<C> {
        [Loader.kRecord]?: Dict<ForkScope<C>>;
        alias?: string;
    }
}
export declare abstract class Loader {
    static readonly kRecord: unique symbol;
    static readonly exitCode = 51;
    envData: EnvData;
    ctxData: {};
    app: Context;
    baseDir: string;
    config: Context.Config;
    entry: Context;
    suspend: boolean;
    filename: string;
    writable: boolean;
    envfile: string;
    cache: Dict<string>;
    abstract readConfig(): Context.Config;
    abstract writeConfig(): void;
    abstract resolve(name: string): Promise<string>;
    abstract resolvePlugin(name: string): Promise<any>;
    abstract fullReload(): void;
    interpolate(source: any): any;
    private forkPlugin;
    isTruthyLike(expr: any): boolean;
    reloadPlugin(parent: Context, key: string, config: any): Promise<import("cordis").ForkScope<Context>>;
    unloadPlugin(ctx: Context, key: string): void;
    createApp(): Promise<Context>;
}
