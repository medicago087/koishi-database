"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MapPlugin = void 0;
const mapping_base_1 = require("./mapping-base");
const cordis_decorators_1 = require("cordis-decorators");
function MappedConfig(dict) {
    const PropertySchema = class SpecificPropertySchema {
    };
    for (const [key, plugin] of Object.entries(dict)) {
        (0, cordis_decorators_1.SchemaProperty)({
            type: (0, cordis_decorators_1.getPluginSchema)(plugin),
        })(PropertySchema.prototype, key);
    }
    return PropertySchema;
}
function MapPlugin(dict, outerConfig) {
    const basePlugin = class SpecificMapPlugin extends mapping_base_1.MappingPluginBase {
        _getDict() {
            return dict;
        }
        _getPluginConfig(key) {
            return this.config[key];
        }
    };
    const schema = MappedConfig(dict);
    const factory = (0, cordis_decorators_1.CreatePluginFactory)(basePlugin, schema);
    return factory(outerConfig);
}
exports.MapPlugin = MapPlugin;
//# sourceMappingURL=map-plugin.js.map