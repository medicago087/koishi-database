var R=Object.defineProperty;var y=(b,v)=>R(b,"name",{value:v,configurable:!0});(()=>{"use strict";var b={913:function(a,u,c){var _=this&&this.__decorate||function(l,s,d,p){var n=arguments.length,e=n<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,d):p,t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(l,s,d,p);else for(var i=l.length-1;i>=0;i--)(t=l[i])&&(e=(n<3?t(e):n>3?t(s,d,e):t(s,d))||e);return n>3&&e&&Object.defineProperty(s,d,e),e},P=this&&this.__metadata||function(l,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,s)};Object.defineProperty(u,"__esModule",{value:!0}),u.PicSourceYandePluginConfig=void 0;const h=c(856);let f=y(class{},"PicSourceYandePluginConfig");_([(0,h.DefineSchema)({description:"\u7F51\u7AD9 post.json \u7684\u5730\u5740\u3002\u5982\u679C\u4F7F\u7528 Konachan \u5219\u53EF\u4EE5\u4F7F\u7528 `https://konachan.com/post.json` \u3002",default:"https://yande.re/post.json",role:"url"}),P("design:type",String)],f.prototype,"endpoint",void 0),_([(0,h.DefineSchema)({description:"\u9875\u6570\u4E0A\u9650\u3002",default:200}),P("design:type",Number)],f.prototype,"pageLimit",void 0),_([(0,h.DefineSchema)({description:"\u4F7F\u7528\u539F\u59CB\u56FE\u800C\u4E0D\u662F sample \u56FE\u3002",default:!0}),P("design:type",Boolean)],f.prototype,"useOriginal",void 0),f=_([(0,h.RegisterSchema)()],f),u.PicSourceYandePluginConfig=f},607:function(a,u,c){var _=this&&this.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),P=this&&this.__decorate||function(n,e,t,i){var r=arguments.length,o=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var m=n.length-1;m>=0;m--)(g=n[m])&&(o=(r<3?g(o):r>3?g(e,t,o):g(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},h=this&&this.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&_(e,n,t)};Object.defineProperty(u,"__esModule",{value:!0});const f=c(913),l=c(856),s=c(544),d=c(126);h(c(913),u);let p=y(class extends(0,s.PicSourcePlugin)(f.PicSourceYandePluginConfig){constructor(){super(...arguments),this.page=1}nextPage(){const e=this.page;return this.page>=this.config.pageLimit?this.page=1:++this.page,e}async randomPic(e){const t=this.nextPage(),i=await this.http.get(this.config.endpoint,{params:{tags:e.length?e.join("+"):void 0,limit:1e3,page:t}});if(!Array.isArray(i))return;if(i.length===0)return t===1?void 0:(this.page=1,this.randomPic(e));const r=e.length?i.filter(g=>g.tags.split(" ").some(m=>e.includes(m))):i;if(!r.length)return;const o=d.Random.pick(r);return{url:this.config.useOriginal?o.file_url:o.sample_url,description:`#${o.id} ${o.tags} by ${o.author}`}}},"PicSourceYande");p=P([(0,l.DefinePlugin)()],p),u.default=p},126:a=>{a.exports=require("koishi")},544:a=>{a.exports=require("koishi-plugin-pics")},856:a=>{a.exports=require("koishi-thirdeye")}},v={};function O(a){var u=v[a];if(u!==void 0)return u.exports;var c=v[a]={exports:{}};return b[a].call(c.exports,c,c.exports,O),c.exports}y(O,"__webpack_require__");var j=O(607),S=exports;for(var x in j)S[x]=j[x];j.__esModule&&Object.defineProperty(S,"__esModule",{value:!0})})();

//# sourceMappingURL=index.js.map