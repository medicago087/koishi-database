var w=Object.defineProperty;var b=(j,y)=>w(j,"name",{value:y,configurable:!0});(()=>{"use strict";var j={913:function(c,s,a){var h=this&&this.__decorate||function(p,u,d,_){var f=arguments.length,i=f<3?u:_===null?_=Object.getOwnPropertyDescriptor(u,d):_,e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(p,u,d,_);else for(var t=p.length-1;t>=0;t--)(e=p[t])&&(i=(f<3?e(i):f>3?e(u,d,i):e(u,d))||i);return f>3&&i&&Object.defineProperty(u,d,i),i},g=this&&this.__metadata||function(p,u){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(p,u)};Object.defineProperty(s,"__esModule",{value:!0}),s.PicSourceYandePluginConfig=void 0;const P=a(856);let l=b(class{},"PicSourceYandePluginConfig");h([(0,P.DefineSchema)({description:"\u7F51\u7AD9 post.json \u7684\u5730\u5740\u3002\u5982\u679C\u4F7F\u7528 Konachan \u5219\u53EF\u4EE5\u4F7F\u7528 `https://konachan.com/post.json` \u3002",default:"https://yande.re/post.json",role:"url"}),g("design:type",String)],l.prototype,"endpoint",void 0),h([(0,P.DefineSchema)({description:"\u9875\u6570\u4E0A\u9650\u3002",default:200}),g("design:type",Number)],l.prototype,"pageLimit",void 0),h([(0,P.DefineSchema)({description:"\u4F7F\u7528\u539F\u59CB\u56FE\u800C\u4E0D\u662F sample \u56FE\u3002",default:!0}),g("design:type",Boolean)],l.prototype,"useOriginal",void 0),l=h([(0,P.RegisterSchema)()],l),s.PicSourceYandePluginConfig=l},607:function(c,s,a){var h=this&&this.__createBinding||(Object.create?function(i,e,t,n){n===void 0&&(n=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,n,r)}:function(i,e,t,n){n===void 0&&(n=t),i[n]=e[t]}),g=this&&this.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var v=i.length-1;v>=0;v--)(m=i[v])&&(o=(r<3?m(o):r>3?m(e,t,o):m(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},P=this&&this.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&h(e,i,t)},l=this&&this.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};Object.defineProperty(s,"__esModule",{value:!0});const p=a(913),u=a(856),d=a(544),_=a(126);P(a(913),s);let f=b(class extends(0,d.PicSourcePlugin)(p.PicSourceYandePluginConfig){constructor(){super(...arguments),this.page=1}nextPage(){const e=this.page;return this.page>=this.config.pageLimit?this.page=1:++this.page,e}async randomPic(e){const t=this.nextPage(),n=await this.http.get(this.config.endpoint,{params:{tags:e.length?e.join("+"):void 0,limit:1e3,page:t}});if(!Array.isArray(n))return;if(n.length===0)return t===1?void 0:(this.page=1,this.randomPic(e));const r=e.length?n.filter(m=>m.tags.split(" ").some(v=>e.includes(v))):n;if(!r.length)return;const o=_.Random.pick(r);return{url:this.config.useOriginal?o.file_url:o.sample_url,description:`#${o.id} ${o.tags} by ${o.author}`}}},"PicSourceYande");g([(0,u.Inject)(!0),l("design:type",_.Quester)],f.prototype,"http",void 0),f=g([(0,u.DefinePlugin)()],f),s.default=f},126:c=>{c.exports=require("koishi")},544:c=>{c.exports=require("koishi-plugin-pics")},856:c=>{c.exports=require("koishi-thirdeye")}},y={};function S(c){var s=y[c];if(s!==void 0)return s.exports;var a=y[c]={exports:{}};return j[c].call(a.exports,a,a.exports,S),a.exports}b(S,"__webpack_require__");var O=S(607),R=exports;for(var x in O)R[x]=O[x];O.__esModule&&Object.defineProperty(R,"__esModule",{value:!0})})();

//# sourceMappingURL=index.js.map