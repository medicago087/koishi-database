var __defProp = Object.defineProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });

// koishi/packages/koishi/src/index.ts
import { Context } from "@koishijs/core";
import ns from "ns-require";
import { Router, WebSocketLayer } from "@satorijs/satori";
export * from "@koishijs/core";
export * from "@koishijs/utils";
var Patch = class {
  constructor(ctx) {
    ctx.root.envData ??= {};
    ctx.root.baseDir ??= process.cwd();
  }
};
__name(Patch, "Patch");
Context.service("$patch", Patch);
var scope = ns({
  namespace: "koishi",
  prefix: "plugin",
  official: "koishijs"
});
var plugin = Context.prototype.plugin;
Context.prototype.plugin = function(entry, config) {
  if (typeof entry === "string") {
    entry = scope.require(entry);
  }
  return plugin.call(this, entry, config);
};
export {
  Router,
  WebSocketLayer,
  scope
};
//# sourceMappingURL=index.mjs.map
